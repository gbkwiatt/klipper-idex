
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="img/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>Dockable Probe - Klipper documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="_klipper3d/css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-138371409-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#basic-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Klipper documentation" class="md-header__button md-logo" aria-label="Klipper documentation" data-md-component="logo">
      
  <img src="img/klipper.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Klipper documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dockable Probe
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5z"/></svg>
            </label>
          
        
      </form>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2 0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="/" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/zh/" hreflang="zh" class="md-select__link">
                    简体中文
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/zh-Hant/" hreflang="zh-Hant" class="md-select__link">
                    繁體中文
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/hu/" hreflang="hu" class="md-select__link">
                    Magyar
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/it/" hreflang="it" class="md-select__link">
                    Italiano
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/fr/" hreflang="fr" class="md-select__link">
                    Français
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Klipper3d/klipper/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Klipper3d/klipper
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Klipper documentation" class="md-nav__button md-logo" aria-label="Klipper documentation" data-md-component="logo">
      
  <img src="img/klipper.svg" alt="logo">

    </a>
    Klipper documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Klipper3d/klipper/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Klipper3d/klipper
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Overview.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Features.html" class="md-nav__link">
        Features
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="FAQ.html" class="md-nav__link">
        Frequently Asked Questions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Releases.html" class="md-nav__link">
        Releases
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Config_Changes.html" class="md-nav__link">
        Configuration Changes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Contact.html" class="md-nav__link">
        Contact
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Installation and Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation and Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Installation and Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Installation.html" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          Configuration Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration Reference" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Configuration Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Config_Reference.html" class="md-nav__link">
        Configuration reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Rotation_Distance.html" class="md-nav__link">
        Rotation distance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Config_checks.html" class="md-nav__link">
        Configuration checks
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_4" type="checkbox" id="__nav_7_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_4">
          Bed Level
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Bed Level" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_4">
          <span class="md-nav__icon md-icon"></span>
          Bed Level
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Bed_Level.html" class="md-nav__link">
        Bed leveling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Delta_Calibrate.html" class="md-nav__link">
        Delta calibration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Probe_Calibrate.html" class="md-nav__link">
        Probe calibration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="BLTouch.html" class="md-nav__link">
        BL-Touch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Manual_Level.html" class="md-nav__link">
        Manual leveling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Bed_Mesh.html" class="md-nav__link">
        Bed Mesh
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Endstop_Phase.html" class="md-nav__link">
        Endstop phase
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_5" type="checkbox" id="__nav_7_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_5">
          Resonance Compensation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Resonance Compensation" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_5">
          <span class="md-nav__icon md-icon"></span>
          Resonance Compensation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Resonance_Compensation.html" class="md-nav__link">
        Resonance Compensation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Measuring_Resonances.html" class="md-nav__link">
        Measuring Resonances
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Pressure_Advance.html" class="md-nav__link">
        Pressure advance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="G-Codes.html" class="md-nav__link">
        G-Codes
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_8" type="checkbox" id="__nav_7_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_8">
          Command templates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Command templates" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_8">
          <span class="md-nav__icon md-icon"></span>
          Command templates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Command_Templates.html" class="md-nav__link">
        Commands templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Status_Reference.html" class="md-nav__link">
        Status reference
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TMC_Drivers.html" class="md-nav__link">
        TMC drivers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Multi_MCU_Homing.html" class="md-nav__link">
        Multiple Micro-controller Homing and Probing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Slicers.html" class="md-nav__link">
        Slicers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Skew_Correction.html" class="md-nav__link">
        Skew correction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Exclude_Object.html" class="md-nav__link">
        Exclude Objects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Using_PWM_Tools.html" class="md-nav__link">
        Using PWM tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Developer Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developer Documentation" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Developer Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Code_Overview.html" class="md-nav__link">
        Code overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Kinematics.html" class="md-nav__link">
        Kinematics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Protocol.html" class="md-nav__link">
        Protocol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="API_Server.html" class="md-nav__link">
        API server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="MCU_Commands.html" class="md-nav__link">
        MCU commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CANBUS_protocol.html" class="md-nav__link">
        CANBUS protocol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Debugging.html" class="md-nav__link">
        Debugging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Benchmarks.html" class="md-nav__link">
        Benchmarks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CONTRIBUTING.html" class="md-nav__link">
        Contributing to Klipper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Packaging.html" class="md-nav__link">
        Packaging Klipper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Device Specific Documents
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Device Specific Documents" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Device Specific Documents
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Example_Configs.html" class="md-nav__link">
        Example configurations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="SDCard_Updates.html" class="md-nav__link">
        SDCard updates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="RPi_microcontroller.html" class="md-nav__link">
        RPi microcontroller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Beaglebone.html" class="md-nav__link">
        Beaglebone
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Bootloaders.html" class="md-nav__link">
        Bootloaders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CANBUS.html" class="md-nav__link">
        CANBUS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CANBUS_Troubleshooting.html" class="md-nav__link">
        CANBUS Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="TSL1401CL_Filament_Width_Sensor.html" class="md-nav__link">
        TSL1401CL filament width sensor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Hall_Filament_Width_Sensor.html" class="md-nav__link">
        Hall filament width sensor
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="Sponsors.html" class="md-nav__link">
        Sponsors
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#attaching-and-detaching-positions" class="md-nav__link">
    Attaching and Detaching Positions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dock-z-location" class="md-nav__link">
    Dock Z location
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tool-velocities" class="md-nav__link">
    Tool Velocities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#probe-attachment-verification" class="md-nav__link">
    Probe Attachment Verification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-actions" class="md-nav__link">
    Custom Actions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gcode-commands" class="md-nav__link">
    Gcode commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#typical-probe-execution-flow" class="md-nav__link">
    Typical probe execution flow
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/Klipper3d/klipper/blob/master/docs/Dockable_Probe.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<p>This document is meant to describe behavior related to dockable probes.
These probes are typically microswitches mounted to a printed body that
attaches to the toolhead through some means of mechanical coupling.
This coupling is commonly done with magnets though this module can support
a variety of designs including servo and stepper actuated couplings.</p>
<h1 id="basic-configuration">Basic Configuration<a class="headerlink" href="#basic-configuration" title="Permanent link">&para;</a></h1>
<p>The minimum requirements for functionality are a config section where the
following options are specified. Some users may be transitioning from a macro
based set of commands and many of the options for the <code>[probe]</code> config section
are the same. The <code>[dockable_probe]</code> module is first and foremost a <code>[probe]</code>
with additional functionality added. Any options that can be specified in
for <code>[probe]</code> are valid for <code>[dockable_probe]</code> as well.</p>
<div class="highlight"><pre><span></span><code>[dockable_probe]
pin:
z_offset:
sample_retract_dist:
approach_position:
detach_position:
check_open_attach:
dock_fixed_z:
</code></pre></div>

<p>Additional optional parameters are described in this guide as well as the
required parameters. Certain optional parameters are not required, but highly recommended in order to ensure desired probe behavior is observed. Additionally
the <a href="Probe_Calibrate.html">probe calibrate guide</a> is recommended reading
for users unfamiliar with probe setup in Klipper.</p>
<h2 id="attaching-and-detaching-positions">Attaching and Detaching Positions<a class="headerlink" href="#attaching-and-detaching-positions" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>    dock_position: 300, 295, 0
</code></pre></div>

<p>The first option to specify is the <code>dock_position</code>. This is simply the XYZ
coordinates where the toolhead needs to be positioned in order to attach
the probe. This parameter is X, Y and, Z separated by commas.</p>
<p>Many configurations have the dock attached to a moving gantry. This effectively
means that Z axis positioning is irrelevant. However, it may be necessary
to move the gantry clear of the bed or other printer components before
performing docking steps. Automatic Z hop distances are calculated based on the
probe <code>z_offset</code> + <code>sample_retract_dist</code> to ensure travel moves are
safe. If a Z axis amount is specified for this type of dock, the additional
amount will be added to the Z hop distance.</p>
<p>Other configurations may have the dock mounted next to the printer bed so
that the Z position <em>must</em> be known prior to attaching the probe. If the
probe is mounted in such a way, the Z axis parameter <em>must</em> be supplied,
and the Z axis <em>must</em> be homed prior to attaching the probe.</p>
<div class="highlight"><pre><span></span><code>    approach_position: 300, 250
</code></pre></div>

<p>The most common dock designs utilize a sort of fork or arms that extend out
from the dock. In order to attach the probe to the toolhead, the toolhead must
move into and away from the dock at a particular angle so that these arms can
capture the probe body. For magnetically coupled probes, the <code>approach_position</code>
should be defined so that it is far enough away from the probe so that the
magnets on the probe body are not attracted to the magnets on the toolhead.</p>
<div class="highlight"><pre><span></span><code>    detach_position:  250, 295
</code></pre></div>

<p>Most probes that use magnets require the toolhead to move in a direction that
strips the magnets off with a sliding motion. This is to prevent the magnets
from becoming unseated from repeated pulling and thus affecting probe accuracy.
The <code>detach_position</code> is typically defined as a point that is perpendicular to
the dock so that when the toolhead moves, the probe stays docked but cleanly
detaches from the toolhead mount. For magnetically coupled probes, the
<code>detach_position</code> should be defined so that it is far enough away from the
probe so that the magnets on the probe body are not attracted to the magnets on
the toolhead.</p>
<h2 id="dock-z-location">Dock Z location<a class="headerlink" href="#dock-z-location" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>    dock_fixed_z:   default false
</code></pre></div>

<p>There are various locations that probe docks have been mounted. It seems the
more common locations are next to a bed or on a moving gantry. If the probe
is "fixed" on the Z axis, meaning, it's position relative to XY plane of the
toolhead is always the same, this option should be set to "true".</p>
<p>An example where <code>dock_fixed_z: True</code> is a corexy printer with a bed that moves
up and down along the Z axis with the probe dock mounted to the frame next to a
fixed gantry. The toolhead can move to the probe dock <em>regardless</em> of where
the bed is positioned.</p>
<p>Another example would be a printer with a bed that is fixed to the base of the
printer and the gantry moves along all 3 axes. The dock is mounted to a point on
this moving gantry. This as well would be <code>dock_fixed_z: True</code></p>
<p>A example where <code>dock_fixed_z: False</code> would be a i3 style printer where the dock
is located on the moving bed. When the Z axis moves, the dock's position changes
relative to the toolhead.</p>
<p>Another example of <code>dock_fixed_z: False</code> is a cartesian or hbot cube printer
where the dock is mounted next to the moving bed on the Z axis itself.</p>
<p>Any printer where <code>dock_fixed_z: False</code> requires that the z axis be homed prior
to moving to the dock.</p>
<div class="highlight"><pre><span></span><code>    safe_z_position:    0,0
</code></pre></div>

<p>An optional parameter may be defined for homing the Z axis using the probe.
Similar to <code>safe_z_home</code>, a set of x y coordinates may be defined to use when
homing. If this parameter is omitted, the center of the bed will be used.</p>
<h2 id="tool-velocities">Tool Velocities<a class="headerlink" href="#tool-velocities" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>    attach_speed:   default is probe speed or 5mm/s
    detach_speed: default is probe speed or 5mm/s
    travel_speed:   default is 50 mm/s
</code></pre></div>

<p>Various optional speeds can be defined for approaching, detaching and
traveling. If these parameters are omitted, the module will use the <code>speed</code>
parameter of the probe if defined. If this option is not supplied, 5mm/s
will be used.</p>
<h2 id="probe-attachment-verification">Probe Attachment Verification<a class="headerlink" href="#probe-attachment-verification" title="Permanent link">&para;</a></h2>
<p>Given the nature of this type of probe, it is necessary to verify whether or
not it has successfully attached prior to attempting a probing move. Several
methods can be used to verify various probe attachment states.</p>
<div class="highlight"><pre><span></span><code>    check_open_attach: default false
</code></pre></div>

<p>Certain probes when wired a certain way will report <code>OPEN</code> when they are
attached and <code>TRIGGERED</code> when they are detached in a non-probing state. The
<code>check_open_attach</code> option when set to <code>true</code> will check the state of the
probe pin after performing a probe attach or docking maneuver. If the probe
reports <code>TRIGGERED</code> immediately after the toolhead leaves the dock radius, an
error will be raised and any further action will be aborted.</p>
<p>This is intended to prevent crashing the nozzle into the bed since it is
assumed if the probe pin reads <code>TRIGGERED</code> prior to probing, the probe is
not attached.</p>
<div class="highlight"><pre><span></span><code>    probe_sense_pin:
</code></pre></div>

<p>The probe may include a separate pin for attachment verification. This is a
standard pin definition similar to an endstop pin that defines how to handle the
input from the sensor. Much like the <code>check_open_attach</code> option, the check is
done immediately after the tool attaches or docks the probe. If the probe
is not attached after attempting to attach it, or it remains attached after
attempting to dock it, an error will be raised and further action will be
aborted.</p>
<div class="highlight"><pre><span></span><code>    dock_sense_pin:
</code></pre></div>

<p>Certain docks may have a sensor or switch incorporated into their design in
order to report that the probe is presently located in the dock. A
<code>dock_sense_pin</code> may be provided to provide verification that the probe is
correctly positioned in the dock. This is a standard pin definition similar
to an endstop pin that defines how to handle the input from the sensor.
Prior to attempting to attach the probe, and after attempting to dock it,
this pin is checked. If the probe is not stowed, an error will be raised and
further action will be aborted.</p>
<div class="highlight"><pre><span></span><code>    dock_retries:   0
</code></pre></div>

<p>A magnetic probe may require repeated attempts to attach. If <code>dock_retries</code> is
specified and the probe fails to attach or detach, the attach/detach action
will be repeated until it succeeds. If the retry limit is reached and the probe
is still not in the correct state, an error is raised and futher actions
are aborted.</p>
<div class="highlight"><pre><span></span><code>    allow_delayed_detach: False
</code></pre></div>

<p>Typically, a command that requires the use of the probe will cause the probe
to be attached and then docked when it is no longer needed. In the context
of start gcode, a homing macro, or any sequence with multiple commands requiring
the use of the probe, this results in the probe repeatedly being attached and
docked between commands. If the <code>allow_delayed_detach</code> option is set to True,
the probe will wait for a short period of time before docking at the end of
a command. This can result in calibration macros executing faster as the probe
has to do less traveling. If this option is used, it is recommended to add
the manual <code>DETACH_PROBE</code> command at the end of a macro or start gcode. Often
the <em>next</em> command will start to execute <em>prior</em> to the probe detaching which
can result in a collision.</p>
<h2 id="custom-actions">Custom Actions<a class="headerlink" href="#custom-actions" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>    pre_attach_gcode:
    attach_gcode:
    post_attach_gcode:
    pre_detach_gcode:
    detach_gcode:
    post_detach_gcode:
</code></pre></div>

<p>As universal as this module attempts to be, all use cases cannot be accounted
for. As such several "custom" gcode command templates may be supplied to be
executed at various times during probe maneuvers. These optional gcode sections
may be configured like standard gcode macro command templates with the exception
that gcode macro variables, default parameters, and rename_existing options are
excluded.</p>
<p>These command templates are inserted at various points of the probe execution
flow (below) so they may be used to activate a servo or move the toolhead to
a position that aligns cabling or tubes so that they do not snag on parts of
the printer.</p>
<div class="highlight"><pre><span></span><code>    pre_attach_gcode:
</code></pre></div>

<p>If specified, the <code>pre_attach_gcode</code> is called prior to approaching the dock.
If a servo is needed to move the dock, this is where that command should be
issued.</p>
<div class="highlight"><pre><span></span><code>    attach_gcode:
</code></pre></div>

<p>If specified, the <code>attach_gcode</code> commands are executed immediately <em>after</em> the
toolhead reaches the <code>dock_position</code>. This gcode may be repeated if the probe
fails to attach and <code>dock_retries</code> are specified.</p>
<div class="highlight"><pre><span></span><code>    post_attach_gcode:
</code></pre></div>

<p>If specified, the <code>post_attach_gcode</code> is called immediately after leaving the
dock, but only if the probe was successfully attached.</p>
<div class="highlight"><pre><span></span><code>    pre_detach_gcode:
</code></pre></div>

<p>If specified, the <code>pre_detach_gcode</code> is called prior to approaching the dock.
If a servo is needed to move the dock, this is where that command should be
issued.</p>
<div class="highlight"><pre><span></span><code>    detach_gcode:
</code></pre></div>

<p>If specified, the <code>detach_gcode</code> commands are executed immediately <em>after</em> the
toolhead reaches the <code>dock_position</code>. This gcode may be repeated if the probe
fails to detach and <code>dock_retries</code> are specified.</p>
<div class="highlight"><pre><span></span><code>    post_detach_gcode:
</code></pre></div>

<p>If specified, the <code>post_detach_gcode</code> is called immediately after leaving the
dock, but only if the probe was successfully docked.</p>
<h2 id="gcode-commands">Gcode commands<a class="headerlink" href="#gcode-commands" title="Permanent link">&para;</a></h2>
<p>There are 4 gcode commands that can be used with the probe to perform various
tasks or obtain status information.</p>
<div class="highlight"><pre><span></span><code>    ATTACH_PROBE
</code></pre></div>

<p>This command will move the toolhead to the dock, attach the probe, and then
return to its previous position. If the probe is already attached, the command
will not do anything</p>
<div class="highlight"><pre><span></span><code>    DETACH_PROBE
</code></pre></div>

<p>This command will move the toolhead to the dock, detach the probe, and then
return to its previous position. If the probe is already detached, the command
will not do anything</p>
<div class="highlight"><pre><span></span><code>    GET_PROBE_STATUS
</code></pre></div>

<p>Responds in the gcode terminal with the current status the probe is in. Valid
states are UNKNOWN, ATTACHED, and DOCKED. This is useful during configuration
to confirm probe validation methods are working as intended.</p>
<h2 id="typical-probe-execution-flow">Typical probe execution flow<a class="headerlink" href="#typical-probe-execution-flow" title="Permanent link">&para;</a></h2>
<pre><code>Probing is Started:
</code></pre>
<ul>
<li>A gcode command requiring the use of the probe is executed.</li>
</ul>
<ul>
<li>This triggers the probe to attach</li>
</ul>
<ul>
<li>If configured, the dock sense pin is checked to see if the probe is
      presently in the dock</li>
</ul>
<ul>
<li>If specified, the pre-attach gcode is executed</li>
</ul>
<ul>
<li>The toolhead position is compared to the dock position.</li>
</ul>
<ul>
<li>If the toolhead is outside of the minimum safe radius, the toolhead is
      commanded to move to the the approach vector, that is, a position that is
      the minimum safe distance from the dock in line with the dock angle</li>
</ul>
<ul>
<li>If the toolhead is inside of the minimum safe radius, the toolhead is
      commanded to move to the nearest point on the line of the approach vector</li>
</ul>
<ul>
<li>The tool is moved along the approach vector to the dock coordinates</li>
</ul>
<ul>
<li>If specified, the attach gcode is executed</li>
</ul>
<ul>
<li>The toolhead is commanded to move out of the dock back to the minimum
      safe distance in the reverse direction along the dock angle.</li>
</ul>
<ul>
<li>If configured, the probe is checked to see if it is attached</li>
</ul>
<ul>
<li>If the probe is not attached, the module retries until it is or an error
      is raised</li>
</ul>
<ul>
<li>If configured, the dock sense pin is checked to see if the probe is still
      present, the module retries until it not or an error is raised</li>
</ul>
<ul>
<li>If specified, the post-attach gcode is executed</li>
</ul>
<ul>
<li>The probe moves to the first probing point and beings probing<p>Probing is Finished:</p>
</li>
</ul>
<ul>
<li>After the probe is no longer needed, the probe is triggered to detach.</li>
</ul>
<ul>
<li>If specified, the pre-detach gcode is executed</li>
</ul>
<ul>
<li>The toolhead position is compared to the dock position.</li>
</ul>
<ul>
<li>If the toolhead is outside of the minimum safe radius, the toolhead is
      commanded to move to the the approach vector, that is, a position that is
      the minimum safe distance from the dock in line with the dock angle</li>
</ul>
<ul>
<li>If the toolhead is inside of the minimum safe radius, the toolhead is
      commanded to move to the nearest point on the line of the approach vector</li>
</ul>
<ul>
<li>The tool is moved along the approach vector to the dock coordinates</li>
</ul>
<ul>
<li>If specified, the detach gcode is executed</li>
</ul>
<ul>
<li>The tool is commanded to move along the detach vector if supplied or a
      calculated direction based on axis parameters</li>
</ul>
<ul>
<li>If configured, the probe is checked to see if it is detached</li>
</ul>
<ul>
<li>If the probe is not detached, the module moves the tool back to the
      approach vector and retries until it detaches or an error is raised</li>
</ul>
<ul>
<li>If configured, the dock sense pin is checked to see if the probe is
      present in the dock. If it is not the module moves the tool back to the
      approach vector and retries until it detaches or an error is raised</li>
</ul>
<ul>
<li>If specified, the post-detach gcode is executed</li>
</ul>
<h1 id="use-in-macros">Use in macros<a class="headerlink" href="#use-in-macros" title="Permanent link">&para;</a></h1>
<p>The dockable_probe module can use a delayed detach so that it does not
repeatedly dock and undock the probe from the toolhead while it is being
used in the context of a homing macro or slicer start gcode. This works
in most cases, but if a call to heat-and-wait (M109, M190) or a toolhead move
comes too soon after probing is finished, it may result in the probe staying
attached to the toolhead until after the heater is done heating or the gcode
move completes. This can be avoided by placing a call to <code>DETACH_PROBE</code>
immediately <em>after</em> the last command requiring the probe.</p>
<p>example 1:</p>
<p>Gcode file from slicer</p>
<div class="highlight"><pre><span></span><code>start_print b=90 e=250
</code></pre></div>

<p>Macro definition in Klipper</p>
<div class="highlight"><pre><span></span><code>[gcode_macro start_print]
gcode:
    M190 S{b}           ;set bed temp and wait
    G28                 ;home all axes
    BED_MESH_CALIBRATE  ;generate a bed mesh
    G28 Z0              ;rehome z axis
    DETACH_PROBE        ;ensure probe is detached
    M109 S{e}
</code></pre></div>

<p>example 2:</p>
<p>Gcode file from slicer</p>
<div class="highlight"><pre><span></span><code>M190 S[first_layer_bed_temperature]
M109 S[first_layer_temperature]
G28
BED_MESH_CALIBRATE
G28 Z0
DETACH_PROBE
G92 E0
G1 X0.1 Y0 F8000 ;begin priming line
G1 Z2.0 F3000
</code></pre></div>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.top", "search.suggest", "search.highlight", "search.share"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.0bbba5b5.min.js"}</script>
    
    
      <script src="assets/javascripts/bundle.e1a181d9.min.js"></script>
      
    
  </body>
</html>